---
layout: sidebar
---
<!-- tiny topic badge styles for compact indexing tags -->
<style>
  .topic-badge {
    font-size: 0.55rem;
    padding: 0.12rem 0.28rem;
    border-width: 1px;
    border-radius: 0.35rem;
    line-height: 1;
    margin: 0; /* rely on container gap */
    display: inline-block;
  }
</style>

<!-- Reworked page header: icon at left, title + topics on the right (topics shown below title) -->
<div class="d-flex justify-content-between align-items-start mb-3">
  <div class="d-flex align-items-start gap-3">
    <!-- Icon column -->
    <div style="flex:0 0 72px;">
      {%- assign img_key = page.parent_id | default: page.section -%}
      <div class="rounded-circle d-flex align-items-center justify-content-center {% if img_key %}bg-light text-dark border{% endif %}" style="width:72px;height:72px;overflow:hidden;">
        {% if img_key %}
          <img src="/images/{{ img_key }}.png" alt="{{ img_key }}" width="48" height="48" style="display:block;object-fit:contain;" />
        {% else %}
          <!-- default without colored background -->
          <img src="/images/logo.png" alt="logo" width="48" height="48" style="display:block;object-fit:contain;" />
        {% endif %}
      </div>
    </div>

    <!-- Title column: title, subtitle, small badges, then topics (below title) -->
    <div>
      <h1 class="h3 mb-1 fw-bold">{{ page.title }}</h1>
      {% if page.subtitle %}
      <div class="text-muted small mb-1">{{ page.subtitle }}</div>
      {% endif %}
      <div class="d-flex align-items-center flex-wrap mb-2">
        {% if page.description %}
        <span class="badge bg-light text-muted border mb-1">{{ page.description }}</span>
        {% endif %}
      </div>

      {% comment %}
      Replace topics sourced from page.topics with a derived list that includes
      page.lyrics_en and page.lyrics_ta (if present). Truncate long text for badges.
      {% endcomment %}

      {%- capture topics_raw -%}
        {%- if page.lyrics_en -%}EN: {{ page.lyrics_en | strip_newlines | truncate: 60, '...' }}{%- endif -%}
        {%- if page.lyrics_ta -%}{%- if page.lyrics_en -%};;{%- endif -%}TA: {{ page.lyrics_ta | strip_newlines | truncate: 60, '...' }}{%- endif -%}
      {%- endcapture -%}
      {%- assign topics_list = topics_raw | strip | split: ';;' -%}
      {%- if topics_raw != '' and topics_list.size > 0 -%}
      <div class="d-flex flex-wrap" style="gap: .25rem;">
        {%- for t in topics_list -%}
          <span class="badge bg-light text-muted border topic-badge">{{ t | strip }}</span>
        {%- endfor -%}
      </div>
      {%- endif -%}
    </div>
  </div>

  {% if page.history != false %}
  <!-- The JS will inject the small, compact favorite button here -->
  <div id="favorite-btn-container"></div>
  {% endif %}
</div>

{% include player-music.html %}

{% if page.youtube_id %}
<div class="mx-auto mb-4" style="max-width: 600px;">
    <div class="card shadow-sm rounded">
        <div class="card-body p-2">
            <figure class="mb-0">
                <div class="ratio ratio-{{ page.ratio | default: '16x9' }}">
                    <iframe
                            src="https://www.youtube-nocookie.com/embed/{{ page.youtube_id }}?rel=0&modestbranding=1"
                            class="border-0"
                            title="{{ page.title | default: 'Youtube Video' }}"
                            loading="lazy"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen>
                    </iframe>
                </div>
                <figcaption class="figure-caption mt-2">
                    <a href="https://youtu.be/{{ page.youtube_id }}" target="_blank" rel="noopener">Youtube Video</a>
                </figcaption>
            </figure>
        </div>
    </div>
</div>
{%- endif -%}

<!-- Improved header: show "Lyrics (வரிகள்)" as a styled section header -->
{% if page.section %}
<div class="ms-3 mb-4">
  <div class="d-inline-flex align-items-center gap-2 p-2 px-3 rounded bg-light shadow-sm">
    <!-- simple inline music note (keeps dependency-free) -->
    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true" class="text-primary">
      <path d="M9 1v8.178A3 3 0 1 0 10 12V4h3V1H9z"/>
    </svg>
    <div class="d-flex flex-column">
      <span class="fw-bold h6 mb-0">Lyrics</span>
      <small class="text-muted">வரிகள்</small>
    </div>
  </div>
</div>
{%- endif -%}

{{ content }}
