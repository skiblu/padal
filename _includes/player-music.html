{%- comment -%}
Music player include placeholder.
{%- endcomment -%}

{%- if page.audio_id and page.audio_id != "" -%}
<div class="music-player-wrapper" data-audio-id="{{ page.audio_id }}">
</div>
<script type="module">
    import initMusicPlayer from "/assets/js/music-player-module.js";

    const wrapper = document.querySelector('[data-audio-id="{{ page.audio_id }}"]');
    const audioSrc = "{{ 'https://a.clyp.it' | relative_url }}/{{ page.audio_id }}.mp3";

    initMusicPlayer(wrapper, {
        mode: "single",
        loop: false,
        playlist: [
            {
                src: audioSrc,
                title: "{{ page.title | escape }}",
                sub: "{{ page.section | escape }}"
            }
        ],
        startIndex: 0
    });
</script>
{%- endif -%}
