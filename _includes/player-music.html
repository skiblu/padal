{%- comment -%}
Music player include placeholder.
All UI is now handled by music-player.js.
{%- endcomment -%}

{%- if page.audio_id and page.audio_id != "" -%}
<div class="music-player-wrapper" data-audio-id="{{ page.audio_id }}">

    <!-- Optional: native audio tag kept, but hidden -->
    <audio id="mp-audio-{{ page.audio_id }}" preload="metadata" crossorigin="anonymous" style="display:none;">
        <source
                src="{{ '/assets/audio/' | relative_url }}{{ page.section }}/{{ page.audio_id }}.mp3"
                type="audio/mpeg">
    </audio>

</div>

<!-- Module init -->
<script type="module">
    import initMusicPlayer from "/assets/js/music-player.js";

    const wrapper = document.querySelector('[data-audio-id="{{ page.audio_id }}"]');
    const audioSrc = "{{ '/assets/audio/' | relative_url }}{{ page.section }}/{{ page.audio_id }}.mp3";

    initMusicPlayer(wrapper, {
        mode: "single",
        loop: false,
        playlist: [
            {
                src: audioSrc,
                title: "{{ page.title | escape }}",
                sub: "{{ page.section | escape }}"
            }
        ],
        startIndex: 0
    });
</script>

{%- endif -%}
