{% comment %}
TOC for a single parent as tables
Usage: {% include toc-sections.html parent_name="my-parent-id" %}
{% endcomment %}

{%- assign pid = include.parent_name | default: "" -%}
{%- if pid != "" -%}

{%- assign children_default = site.html_pages | where: "section", pid | sort: "nav_order" -%}
{%- assign children_atoz = site.html_pages | where: "section", pid | sort: "title" -%}

{%- if children_default.size > 0 -%}
<div class="row justify-content-center">
  <div class="m-3 col-md-10">
    <div class="card">
      <div class="card-body">

        <!-- Header & Single Sort Toggle Icon -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="card-title h3 mb-0">Contents</h2>
          <div class="sort-controls">
            <small class="text-muted me-2">Sort by</small>
            <button id="toc-sort-toggle-sub" type="button" data-sort="default" title="Default">
              <img src="/assets/bootstrap-icons/list.svg" width="16" height="16" alt="Default Sort">
            </button>
          </div>
        </div>

        <!-- Default Sort Table -->
        <div id="toc-sub-default" class="toc-section" style="overflow-x:auto;">
          <table class="stylish-table w-100">
            <thead>
            <tr>
              <th>Order</th>
              <th>Title</th>
            </tr>
            </thead>
            <tbody>
            {%- for c in children_default -%}
            <tr>
              <td>{{ c.nav_order }}</td>
              <td><a href="{{ c.url | relative_url }}" class="toc-link">{{ c.title }}</a></td>
            </tr>
            {%- endfor -%}
            </tbody>
          </table>
        </div>

        <!-- Aâ€“Z Sort Table -->
        <div id="toc-sub-atoz" class="toc-section" style="display:none; overflow-x:auto;">
          <table class="stylish-table w-100">
            <thead>
            <tr>
              <th>Order</th>
              <th>Title</th>
            </tr>
            </thead>
            <tbody>
            {%- for c in children_atoz -%}
            <tr>
              <td>{{ c.nav_order }}</td>
              <td><a href="{{ c.url | relative_url }}" class="toc-link">{{ c.title }}</a></td>
            </tr>
            {%- endfor -%}
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>
{%- endif -%}
{%- endif -%}
